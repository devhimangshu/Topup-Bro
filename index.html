<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Top-Up Center</title>

    <!-- Using Tailwind CSS for a modern, utility-first approach -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Inter (Normal Font) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tone.js for Sound Effects -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>

    <style>
        :root {
            --primary-glow: #00f6ff;
            --background-dark: #0a0f18;
            --container-bg: rgba(15, 25, 45, 0.6);
        }

        body {
            font-family: 'Inter', sans-serif; /* Reverted to normal font */
            background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e, #1c3d52);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: #f0f0f0;
            overflow-x: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .glass-container {
            background: var(--container-bg);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 246, 255, 0.2);
            box-shadow: 0 0 20px rgba(0, 246, 255, 0.1);
            clip-path: polygon(0 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%);
        }
        
        .text-glow {
            text-shadow: 0 0 8px var(--primary-glow);
        }

        .bonus-text {
            color: var(--primary-glow);
            text-shadow: 0 0 10px var(--primary-glow);
        }
        
        .btn-purchase {
            background: rgba(0, 246, 255, 0.1);
            border: 1px solid rgba(0, 246, 255, 0.5);
            color: #d1e0ff;
            transition: all 0.2s ease-in-out;
            clip-path: polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 8px 100%, 0 calc(100% - 8px));
        }
        
        .btn-purchase:hover {
            background: rgba(0, 246, 255, 0.8);
            color: #0a0f18;
            box-shadow: 0 0 15px rgba(0, 246, 255, 0.5);
            transform: translateY(-2px);
        }
        
        .offer-box {
            display: inline-block;
            border: 1px solid rgba(0, 246, 255, 0.4);
            padding: 0.15rem 0.5rem;
            border-radius: 0.5rem;
            background: rgba(0, 246, 255, 0.05);
            font-size: 0.8em;
        }

        /* Carousel Styles */
        .carousel-slides { transition: transform 0.5s ease-in-out; }
        .carousel-dot.active { background-color: var(--primary-glow); box-shadow: 0 0 5px var(--primary-glow); }
        
        /* Modal Styles */
        .modal-backdrop { background-color: rgba(10, 15, 24, 0.6); -webkit-backdrop-filter: blur(5px); backdrop-filter: blur(5px); }
        
        /* Message Popup Styles */
        .message-popup { transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out; }
        
        .game-banner-bg { background-image: url('https://placehold.co/600x150/d9534f/ffffff?text=FF+Background'); background-size: cover; background-position: center; }
        
        /* Hide arrows from number input */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }

    </style>
</head>
<body class="text-white">
<div class="max-w-md mx-auto relative">
    <!-- Sticky Header Section -->
    <header class="sticky top-0 z-50 glass-container">
        <div class="mx-auto p-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <img src="https://cdngarenanow-a.akamaihd.net/webmain/static/images/logo-garena.png" alt="Garena Logo" class="h-7"/>
                <span class="text-md font-semibold text-gray-200 text-glow hidden sm:block">Official Top Up Center</span>
            </div>
            <div id="user-icon-container" class="relative">
                 <div id="default-user-icon" class="w-8 h-8 rounded-full flex items-center justify-center bg-gray-700/50 border border-gray-500/50">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                </div>
            </div>
        </div>
    </header>

    <!-- Interactive Carousel Banner Section -->
    <div id="banner-carousel" class="mx-auto px-2 my-3 relative">
        <div class="w-full rounded-lg overflow-hidden shadow-lg">
            <div class="carousel-slides flex">
                <div class="w-full flex-shrink-0"><img src="https://placehold.co/600x250/24243e/e0e0e0?text=Naruto+Event" alt="Event Banner 1" class="w-full h-auto max-h-48 object-cover"></div>
                <div class="w-full flex-shrink-0"><img src="https://placehold.co/600x250/302b63/e0e0e0?text=Diamond+Discount" alt="Event Banner 2" class="w-full h-auto max-h-48 object-cover"></div>
                <div class="w-full flex-shrink-0"><img src="https://placehold.co/600x250/0f0c29/e0e0e0?text=New+Season" alt="Event Banner 3" class="w-full h-auto max-h-48 object-cover"></div>
            </div>
        </div>
        <button id="prev-slide" class="absolute top-1/2 left-4 -translate-y-1/2 bg-black/30 p-1 rounded-full text-white hover:bg-black/50 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
        <button id="next-slide" class="absolute top-1/2 right-4 -translate-y-1/2 bg-black/30 p-1 rounded-full text-white hover:bg-black/50 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
        <div id="carousel-dots" class="absolute bottom-2 left-1/2 -translate-x-1/2 flex space-x-2"></div>
    </div>
    
    <!-- Post-Login Game Banner -->
    <div id="game-banner" class="mx-auto px-2 my-3 hidden">
        <div class="w-full rounded-lg overflow-hidden shadow-lg game-banner-bg p-4 flex flex-col justify-between h-28 relative">
             <div class="absolute inset-0 bg-black/40"></div>
             <div class="relative z-10 flex items-center space-x-3">
                 <img src="https://placehold.co/100x100/d9534f/ffffff?text=FF" class="rounded-lg h-12 w-12 border-2 border-white/50">
                 <h2 class="text-lg font-bold text-white text-glow">Free Fire</h2>
             </div>
             <div class="relative z-10 flex items-center space-x-2 text-xs bg-black/50 rounded-full px-3 py-1 self-start">
                 <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>
                 <span>100% Secure Payment</span>
             </div>
        </div>
    </div>

    <!-- Game Selection Section -->
    <div id="game-selection" class="mx-auto p-2">
        <div class="glass-container p-4">
            <h2 class="text-md font-bold text-glow mb-4">Game Selection</h2>
            <div class="grid grid-cols-4 gap-4 text-center text-xs font-semibold">
                <div id="free-fire-btn" class="cursor-pointer hover:opacity-80 transition-opacity"><img src="https://placehold.co/100x100/d9534f/ffffff?text=FF" class="rounded-xl mx-auto mb-2 border-2 border-red-400"><p>Free Fire</p></div>
                <div class="coming-soon-btn cursor-pointer hover:opacity-80 transition-opacity"><img src="https://placehold.co/100x100/1c3d52/e0e0e0?text=Shell" class="rounded-xl mx-auto mb-2"><p>Shell Top Up</p></div>
                <div class="coming-soon-btn cursor-pointer hover:opacity-80 transition-opacity"><img src="https://placehold.co/100x100/1c3d52/e0e0e0?text=AOV" class="rounded-xl mx-auto mb-2"><p>Garena AOV</p></div>
                <div class="coming-soon-btn cursor-pointer hover:opacity-80 transition-opacity"><img src="https://placehold.co/100x100/1c3d52/e0e0e0?text=SD" class="rounded-xl mx-auto mb-2"><p>Speed Drifters</p></div>
            </div>
        </div>
    </div>

    <!-- Main Content: Top-Up List -->
    <div id="top-up-list" class="mx-auto p-2 pb-12 hidden">
        <div class="glass-container">
            <div class="p-3 border-b border-[var(--primary-glow)]/20"><h2 class="text-md font-bold text-glow">Pay Using UPI</h2></div>
            <ul class="divide-y divide-[var(--primary-glow)]/20">
                <li class="p-3 flex justify-between items-center"><div class="flex items-center"><img src="https://cdngarenanow-a.akamaihd.net/gop/app/0000/100/067/point.png" class="h-8 mr-3" alt="Diamond Icon"/><div><p class="text-xs text-gray-300">Diamond</p><p class="font-semibold text-sm text-glow">100 <span class="offer-box bonus-text font-normal ml-1">+ 100 diamond</span></p></div></div><a href="upi://pay?pa=Q024832912@ybl&pn=Gshopindia&am=80&cu=INR&tn=gshopindia"><button class="btn-purchase font-bold py-1 px-2 rounded-md w-20 h-9 text-sm">₹80</button></a></li>
                <li class="p-3 flex justify-between items-center"><div class="flex items-center"><img src="https://cdngarenanow-a.akamaihd.net/gop/app/0000/100/067/point.png" class="h-8 mr-3" alt="Diamond Icon"/><div><p class="text-xs text-gray-300">Diamond</p><p class="font-semibold text-sm text-glow">310 <span class="offer-box bonus-text font-normal ml-1">+ 310 diamond</span></p></div></div><a href="upi://pay?pa=Q024832912@ybl&pn=Gshopindia&am=240&cu=INR&tn=gshopindia"><button class="btn-purchase font-bold py-1 px-2 rounded-md w-20 h-9 text-sm">₹240</button></a></li>
                <li class="p-3 flex justify-between items-center"><div class="flex items-center"><img src="https://cdngarenanow-a.akamaihd.net/gop/app/0000/100/067/point.png" class="h-8 mr-3" alt="Diamond Icon"/><div><p class="text-xs text-gray-300">Diamond</p><p class="font-semibold text-sm text-glow">520 <span class="offer-box bonus-text font-normal ml-1">+ 520 diamond</span></p></div></div><a href="upi://pay?pa=Q024832912@ybl&pn=Gshopindia&am=400&cu=INR&tn=gshopindia"><button class="btn-purchase font-bold py-1 px-2 rounded-md w-20 h-9 text-sm">₹400</button></a></li>
                <li class="p-3 flex justify-between items-center"><div class="flex items-center"><img src="https://cdngarenanow-a.akamaihd.net/gop/app/0000/100/067/point.png" class="h-8 mr-3" alt="Diamond Icon"/><div><p class="text-xs text-gray-300">Diamond</p><p class="font-semibold text-sm text-glow">1,060 <span class="offer-box bonus-text font-normal ml-1">+ 1,060 diamond</span></p></div></div><a href="upi://pay?pa=Q024832912@ybl&pn=Gshopindia&am=800&cu=INR&tn=gshopindia"><button class="btn-purchase font-bold py-1 px-2 rounded-md w-20 h-9 text-sm">₹800</button></a></li>
                <li class="p-3 flex justify-between items-center"><div class="flex items-center"><img src="https://cdngarenanow-a.akamaihd.net/gop/app/0000/100/067/point.png" class="h-8 mr-3" alt="Diamond Icon"/><div><p class="text-xs text-gray-300">Diamond</p><p class="font-semibold text-sm text-glow">2,180 <span class="offer-box bonus-text font-normal ml-1">+ 2,180 diamond</span></p></div></div><a href="upi://pay?pa=Q024832912@ybl&pn=Gshopindia&am=1600&cu=INR&tn=gshopindia"><button class="btn-purchase font-bold py-1 px-2 rounded-md w-20 h-9 text-sm">₹1,600</button></a></li>
                <li class="p-3 flex justify-between items-center"><div class="flex items-center"><img src="https://cdngarenanow-a.akamaihd.net/gop/app/0000/100/067/point.png" class="h-8 mr-3" alt="Diamond Icon"/><div><p class="text-xs text-gray-300">Diamond</p><p class="font-semibold text-sm text-glow">5,600 <span class="offer-box bonus-text font-normal ml-1">+ 5,600 diamond</span></p></div></div><a href="upi://pay?pa=Q024832912@ybl&pn=Gshopindia&am=4000&cu=INR&tn=gshopindia"><button class="btn-purchase font-bold py-1 px-2 rounded-md w-20 h-9 text-sm">₹4,000</button></a></li>
                <li class="p-3 flex justify-between items-center"><div class="flex items-center"><img src="https://html-generator.com/uploads/images/2021/12/12/69338PCBY_LHZ1K.png" class="h-8 mr-3" alt="Voucher Icon"/><div><p class="text-xs text-gray-300">Voucher</p><p class="font-semibold text-sm text-glow">Weekly Membership</p></div></div><a href="upi://pay?pa=Q024832912@ybl&pn=Gshopindia&am=159&cu=INR&tn=gshopindia"><button class="btn-purchase font-bold py-1 px-2 rounded-md w-20 h-9 text-sm">₹159</button></a></li>
                <li class="p-3 flex justify-between items-center"><div class="flex items-center"><img src="https://html-generator.com/uploads/images/2021/12/12/69338PCBY_LHZ1K.png" class="h-8 mr-3" alt="Voucher Icon"/><div><p class="text-xs text-gray-300">Voucher</p><p class="font-semibold text-sm text-glow">Monthly Membership</p></div></div><a href="upi://pay?pa=Q024832912@ybl&pn=Gshopindia&am=799&cu=INR&tn=gshopindia"><button class="btn-purchase font-bold py-1 px-2 rounded-md w-20 h-9 text-sm">₹799</button></a></li>
            </ul>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer-dark text-center py-4"><div class="space-y-3"><div><a href="#" class="px-2 text-xs hover:text-white transition-colors">Customer Support</a></div><hr class="border-gray-500/30 max-w-xs mx-auto"><p class="text-xs px-4">&copy; Garena Online. Trademarks belong to their respective owners. All rights reserved.</p><div class="text-xs space-x-3"><a href="#" class="hover:text-white transition-colors">FAQ</a><a href="#" class="hover:text-white transition-colors">Terms and Conditions</a><a href="#" class="hover:text-white transition-colors">Privacy Policy</a></div></div></footer>
</div>

<!-- Player ID Login Modal -->
<div id="login-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop hidden"><div class="glass-container w-full max-w-sm"><div class="p-4 border-b border-[var(--primary-glow)]/20 flex justify-between items-center"><h3 class="text-lg font-bold text-glow">Enter Player ID</h3><button id="close-modal-btn" class="text-gray-300 hover:text-white text-2xl">&times;</button></div><div class="p-6 space-y-4"><p id="login-error" class="text-red-400 text-sm hidden">Player ID must be 10 digits.</p><input id="player-id-input" type="number" placeholder="Please enter your Player ID" class="w-full bg-black/20 border border-gray-500/50 rounded-lg p-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[var(--primary-glow)]"><button id="login-btn" class="w-full btn-purchase font-bold py-3 rounded-lg">Login</button></div></div></div>

<!-- Message Popup -->
<div id="message-popup" class="fixed top-20 left-1/2 -translate-x-1/2 z-50 hidden message-popup opacity-0 transform scale-95"><div class="glass-container p-4 text-center"><p id="message-popup-text"></p></div></div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- Sound Effects ---
            const synth = new Tone.Synth().toDestination();
            const playClickSound = () => synth.triggerAttackRelease("C2", "8n");
            const playLoginSound = () => synth.triggerAttackRelease("C4", "8n");
            const playMessageSound = () => synth.triggerAttackRelease("E3", "8n");
            
            // Note the :not(#login-btn) to prevent double sound on login
            document.querySelectorAll('button:not(#login-btn), .coming-soon-btn, #free-fire-btn').forEach(btn => {
                btn.addEventListener('click', playClickSound);
            });

            // --- Main Application Logic ---
            const gameSelection = document.getElementById('game-selection');
            const topUpList = document.getElementById('top-up-list');
            const loginModal = document.getElementById('login-modal');
            const freeFireBtn = document.getElementById('free-fire-btn');
            const loginBtn = document.getElementById('login-btn');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const playerIdInput = document.getElementById('player-id-input');
            const userIconContainer = document.getElementById('user-icon-container');
            const comingSoonBtns = document.querySelectorAll('.coming-soon-btn');
            const messagePopup = document.getElementById('message-popup');
            const messagePopupText = document.getElementById('message-popup-text');
            const bannerCarousel = document.getElementById('banner-carousel');
            const gameBanner = document.getElementById('game-banner');
            const loginError = document.getElementById('login-error');
            
            let defaultUserIconHTML = userIconContainer.innerHTML;

            function showMessage(text, duration = 2000) {
                playMessageSound();
                messagePopupText.textContent = text;
                messagePopup.classList.remove('hidden');
                setTimeout(() => { messagePopup.classList.remove('opacity-0', 'scale-95'); messagePopup.classList.add('opacity-100', 'scale-100'); }, 10);
                setTimeout(() => { messagePopup.classList.remove('opacity-100', 'scale-100'); messagePopup.classList.add('opacity-0', 'scale-95'); setTimeout(() => messagePopup.classList.add('hidden'), 300); }, duration);
            }

            freeFireBtn.addEventListener('click', () => loginModal.classList.remove('hidden'));
            closeModalBtn.addEventListener('click', () => loginModal.classList.add('hidden'));
            comingSoonBtns.forEach(btn => btn.addEventListener('click', () => showMessage('Coming Soon!')));
            
            loginBtn.addEventListener('click', () => {
                const playerId = playerIdInput.value.trim();
                const validPlayerId = /^\d{10}$/;
                if (validPlayerId.test(playerId)) {
                    playLoginSound();
                    loginError.classList.add('hidden');
                    loginModal.classList.add('hidden');
                    gameSelection.classList.add('hidden');
                    bannerCarousel.classList.add('hidden');
                    gameBanner.classList.remove('hidden');
                    topUpList.classList.remove('hidden');
                    updateUserMenu(playerId);
                } else {
                    loginError.classList.remove('hidden');
                    playerIdInput.focus();
                }
            });

            function updateUserMenu(playerId) {
                const userMenuHTML = `
                    <div id="logged-in-icon" class="w-8 h-8 rounded-full flex items-center justify-center bg-gray-700/50 border border-green-400/50 cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg></div>
                    <div id="user-dropdown" class="absolute top-full right-0 mt-2 w-56 glass-container hidden text-sm p-2 z-50"><div class="p-2 space-y-1"><p class="text-xs text-gray-400">Player ID:</p><p class="font-bold truncate">${playerId}</p></div><div class="border-t border-[var(--primary-glow)]/20 my-1"></div><div class="p-2 space-y-1"><p class="text-xs text-gray-400">Server:</p><div class="flex items-center"><svg class="w-4 h-4 mr-2" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_303_3)"><path d="M0 0H24V24H0V0Z" fill="white" fill-opacity="0.01"/><path d="M21 2H3C2.44772 2 2 2.44772 2 3V21C2 21.5523 2.44772 22 3 22H21C21.5523 22 22 21.5523 22 21V3C22 2.44772 21.5523 2 21 2Z" fill="#F0F0F0"/><path d="M21 2H3C2.44772 2 2 2.44772 2 3V8H22V3C22 2.44772 21.5523 2 21 2Z" fill="#FF9933"/><path d="M2 16H22V21C22 21.5523 21.5523 22 21 22H3C2.44772 22 2 21.5523 2 21V16Z" fill="#128807"/><path d="M12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z" stroke="#000080" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round"/></g><defs><clipPath id="clip0_303_3"><rect width="24" height="24" fill="white"/></clipPath></defs></svg><span>India</span></div></div><div class="border-t border-[var(--primary-glow)]/20 my-1"></div><button id="logout-btn" class="w-full text-left p-2 text-red-400 hover:bg-white/10 rounded-md">Logout</button></div>`;
                userIconContainer.innerHTML = userMenuHTML;
                const loggedInIcon = document.getElementById('logged-in-icon');
                const userDropdown = document.getElementById('user-dropdown');
                loggedInIcon.addEventListener('click', (e) => { e.stopPropagation(); userDropdown.classList.toggle('hidden'); });
                document.addEventListener('click', () => userDropdown.classList.add('hidden'));
                
                const logoutButton = document.getElementById('logout-btn');
                logoutButton.addEventListener('click', logout);
                logoutButton.addEventListener('click', playClickSound); // Add sound for logout button
            }

            function logout() {
                topUpList.classList.add('hidden'); gameBanner.classList.add('hidden'); gameSelection.classList.remove('hidden'); bannerCarousel.classList.remove('hidden'); userIconContainer.innerHTML = defaultUserIconHTML; playerIdInput.value = '';
            }

            // Carousel Logic
            const carousel = document.getElementById('banner-carousel');
            const slidesContainer = carousel.querySelector('.carousel-slides');
            const slides = Array.from(slidesContainer.children);
            const nextButton = document.getElementById('next-slide');
            const prevButton = document.getElementById('prev-slide');
            const dotsContainer = document.getElementById('carousel-dots');
            let currentIndex = 0, slideInterval, slideCount = slides.length;
            slides.forEach((_, i) => { const dot = document.createElement('button'); dot.classList.add('carousel-dot', 'w-2', 'h-2', 'bg-white/50', 'rounded-full', 'transition-colors'); dot.addEventListener('click', () => { goToSlide(i); resetInterval(); }); dotsContainer.appendChild(dot); });
            const dots = Array.from(dotsContainer.children);
            const goToSlide = (index) => { slidesContainer.style.transform = `translateX(-${index * 100}%)`; dots.forEach(dot => dot.classList.remove('active')); dots[index].classList.add('active'); currentIndex = index; };
            const nextSlide = () => goToSlide((currentIndex + 1) % slideCount);
            const prevSlide = () => goToSlide((currentIndex - 1 + slideCount) % slideCount);
            const startInterval = () => slideInterval = setInterval(nextSlide, 5000);
            const resetInterval = () => { clearInterval(slideInterval); startInterval(); };
            nextButton.addEventListener('click', () => { nextSlide(); resetInterval(); });
            prevButton.addEventListener('click', () => { prevSlide(); resetInterval(); });
            let isDragging = false, startPos = 0, currentTranslate = 0, prevTranslate = 0, animationID, carouselWidth = carousel.offsetWidth;
            const getPositionX = e => e.type.includes('mouse') ? e.pageX : e.touches[0].clientX;
            const dragStart = (e) => { isDragging = true; startPos = getPositionX(e); animationID = requestAnimationFrame(animation); slidesContainer.style.transition = 'none'; resetInterval(); carouselWidth = carousel.offsetWidth; };
            const dragMove = (e) => { if (isDragging) { const currentPosition = getPositionX(e); currentTranslate = prevTranslate + currentPosition - startPos; } };
            const dragEnd = () => { isDragging = false; cancelAnimationFrame(animationID); const movedBy = currentTranslate - prevTranslate; if (movedBy < -carouselWidth / 4 && currentIndex < slideCount - 1) currentIndex++; if (movedBy > carouselWidth / 4 && currentIndex > 0) currentIndex--; goToSlide(currentIndex); slidesContainer.style.transition = 'transform 0.5s ease-in-out'; prevTranslate = -currentIndex * carouselWidth; currentTranslate = prevTranslate; };
            function animation() { slidesContainer.style.transform = `translateX(${currentTranslate}px)`; if (isDragging) requestAnimationFrame(animation); }
            function setPositionByIndex() { currentTranslate = currentIndex * -carouselWidth; prevTranslate = currentTranslate; slidesContainer.style.transform = `translateX(${currentTranslate}px)`; }
            carousel.addEventListener('mousedown', dragStart);
            carousel.addEventListener('touchstart', dragStart, { passive: true });
            carousel.addEventListener('mouseup', dragEnd);
            carousel.addEventListener('touchend', dragEnd);
            carousel.addEventListener('mouseleave', dragEnd);
            carousel.addEventListener('mousemove', dragMove);
            carousel.addEventListener('touchmove', dragMove, { passive: true });
            window.addEventListener('resize', () => { carouselWidth = carousel.offsetWidth; setPositionByIndex(); });
            goToSlide(0);
            startInterval();
        });
    </script>

</body>
</html>
